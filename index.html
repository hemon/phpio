<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>PHPIO by hemon</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>PHPIO</h1>
          <h2>Prism for php, io monitor</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/hemon/phpio/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/hemon/phpio/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/hemon/phpio" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="phpio" class="anchor" href="#phpio"><span class="octicon octicon-link"></span></a>PHPIO</h1>

<p>PHPIO is prism for php. it's base on <a href="http://aop-php.github.com">aop-php</a> extension. focus on monitoring IO operation, such like MySQL, Memcache, Redis, APC and so on.</p>

<ul>
<li>Common<br>
connection's host and port, call trace, function args, response and error message.</li>
<li>MySQL, PDO<br>
record raw SQL query stirng and affected rows.</li>
<li>Curl<br>
record raw http header(request &amp; response), and reporting the full infomation of time,speed and size.</li>
<li>Memcached<br>
record key for operation, the real server where key is mapped to.</li>
<li>Redis</li>
<li>Exception, Error<br>
recode Exception and All Error types.</li>
<li>Call Graph<br>
call graph is svg format, click map node redirect to source.</li>
<li>Cross Request Tracking<br>
auto append debug flag in curl sub_request, track web service call. </li>
<li>Source viewer<br>
</li>
</ul><p><a href="http://hemon.github.io/phpio/demo/index.html">DEMO</a></p>

<p><img src="//raw.github.com/hemon/phpio/master/www/img/screenshot.png" alt="Screenshot"></p>

<h2>
<a name="install-aop-extension" class="anchor" href="#install-aop-extension"><span class="octicon octicon-link"></span></a>Install aop extension</h2>

<pre><code>pecl install aop-beta
</code></pre>

<pre><code>[aop]  
extension=aop.so 
</code></pre>

<p>if coredump ?<br>
1. change you aop extension version (the pecl version is stable than github)<br>
2. rebuild php</p>

<h2>
<a name="get-phpio" class="anchor" href="#get-phpio"><span class="octicon octicon-link"></span></a>get phpio</h2>

<p>download tarball  </p>

<pre><code>wget https://github.com/hemon/phpio/tarball/master -O phpio.tar.gz  
tar xvf phpio.tar.gz  
</code></pre>

<p>or git clone   </p>

<pre><code>git clone https://hemon@github.com/hemon/phpio
</code></pre>

<h2>
<a name="prepend-phpiophp" class="anchor" href="#prepend-phpiophp"><span class="octicon octicon-link"></span></a>prepend phpio.php</h2>

<p>php.ini  </p>

<pre><code>auto_prepend_file = /path/to/phpio/phpio.php  
</code></pre>

<p>php-fpm  </p>

<pre><code>php_admin_value[auto_prepend_file] = /path/to/phpio/phpio.php
</code></pre>

<h2>
<a name="start-profile" class="anchor" href="#start-profile"><span class="octicon octicon-link"></span></a>start profile</h2>

<p>run you php programs with param XDEBUG_PROFILE=1  </p>

<pre><code>$_REQUEST['XDEBUG_PROFILE']=1  
$_COOKIE['XDEBUG_PROFILE']=1  
$_SERVER['XDEBUG_PROFILE']=1  
</code></pre>

<p>for example : 
<a href="http://www.example.com/index.php?XDEBUG_PROFILE=1">http://www.example.com/index.php?XDEBUG_PROFILE=1</a> </p>

<p>recommand firfox addon <a href="https://addons.mozilla.org/firefox/addon/easy-xdebug-with-moveable-/">easy-xdebug</a>, it can auto append user defined cookie param in request(default is XDEBUG_PROFILE=1): </p>

<p>in php-cli mode, use <code>export</code> command to set param for $_SERVER </p>

<pre><code>export XDEBUG_PROFILE=1
</code></pre>

<h2>
<a name="view-profile" class="anchor" href="#view-profile"><span class="octicon octicon-link"></span></a>view profile</h2>

<p>make phpio/www is accessible:  </p>

<pre><code>http://path/to/phpio/www/  
</code></pre>
        </section>

        <footer>
          PHPIO is maintained by <a href="https://github.com/hemon">hemon</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-279687-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>